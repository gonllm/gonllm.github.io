<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾®åˆ†ãƒ»ç©åˆ†å­¦ç¿’ã‚¢ãƒ—ãƒª</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <meta name="theme-color" content="#2563eb">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --background: #f8fafc;
            --surface: #ffffff;
            --text: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --success: #22c55e;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--background) 0%, #e0f2fe 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: var(--surface);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            text-align: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: var(--surface);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--surface);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8rem;
            font-weight: 600;
        }

        .card h3 {
            color: var(--text);
            margin: 25px 0 15px 0;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .formula-box {
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            border-left: 4px solid var(--primary);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-size: 1.1rem;
        }

        .example-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left: 4px solid var(--secondary);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .quiz-container {
            background: var(--surface);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid var(--border);
        }

        .quiz-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }

        .quiz-option {
            padding: 15px 20px;
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .quiz-option:hover {
            border-color: var(--primary);
            background: #eff6ff;
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: var(--success);
            color: white;
        }

        .quiz-option.incorrect {
            border-color: var(--error);
            background: var(--error);
            color: white;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }

        .feedback.success {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .feedback.error {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        .calculator {
            background: var(--surface);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid var(--border);
        }

        .calc-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .calc-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .calc-result {
            background: var(--background);
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            min-height: 60px;
            display: flex;
            align-items: center;
            font-size: 1.2rem;
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .lesson-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 25px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lesson-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .lesson-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .lesson-card p {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .difficulty {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .difficulty.beginner {
            background: #dcfce7;
            color: #166534;
        }

        .difficulty.intermediate {
            background: #fef3c7;
            color: #92400e;
        }

        .difficulty.advanced {
            background: #fce7f3;
            color: #be185d;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .nav-tabs {
                flex-direction: column;
                gap: 8px;
            }

            .nav-tab {
                text-align: center;
            }

            .card {
                padding: 20px;
            }

            .lesson-grid {
                grid-template-columns: 1fr;
            }
        }

        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            display: none;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
        }

        .install-prompt.show {
            display: flex;
        }

        .install-prompt button {
            background: white;
            color: var(--primary);
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š å¾®åˆ†ãƒ»ç©åˆ†å­¦ç¿’ã‚¢ãƒ—ãƒª</h1>
            <p>åŸºç¤ã‹ã‚‰å­¦ã¶æ•°å­¦ã®ä¸–ç•Œã¸ã‚ˆã†ã“ã</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('lessons')">ğŸ“– ãƒ¬ãƒƒã‚¹ãƒ³</button>
            <button class="nav-tab" onclick="switchTab('practice')">âœï¸ ç·´ç¿’å•é¡Œ</button>
            <button class="nav-tab" onclick="switchTab('calculator')">ğŸ”¢ è¨ˆç®—æ©Ÿ</button>
            <button class="nav-tab" onclick="switchTab('progress')">ğŸ“Š é€²æ—</button>
        </div>

        <!-- ãƒ¬ãƒƒã‚¹ãƒ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="lessons" class="content-section active">
            <div class="lesson-grid">
                <div class="lesson-card" onclick="openLesson('differential-basics')">
                    <h3>å¾®åˆ†ã®åŸºç¤</h3>
                    <p>å¾®åˆ†ã®æ¦‚å¿µã¨åŸºæœ¬çš„ãªè¨ˆç®—æ–¹æ³•ã‚’å­¦ã³ã¾ã™</p>
                    <span class="difficulty beginner">åˆç´š</span>
                </div>
                <div class="lesson-card" onclick="openLesson('differential-rules')">
                    <h3>å¾®åˆ†ã®å…¬å¼</h3>
                    <p>ã¹ãä¹—ã€ä¸‰è§’é–¢æ•°ã€æŒ‡æ•°é–¢æ•°ã®å¾®åˆ†å…¬å¼</p>
                    <span class="difficulty intermediate">ä¸­ç´š</span>
                </div>
                <div class="lesson-card" onclick="openLesson('integral-basics')">
                    <h3>ç©åˆ†ã®åŸºç¤</h3>
                    <p>ç©åˆ†ã®æ¦‚å¿µã¨ä¸å®šç©åˆ†ã®è¨ˆç®—æ–¹æ³•</p>
                    <span class="difficulty beginner">åˆç´š</span>
                </div>
                <div class="lesson-card" onclick="openLesson('integral-applications')">
                    <h3>ç©åˆ†ã®å¿œç”¨</h3>
                    <p>é¢ç©è¨ˆç®—ã¨å®šç©åˆ†ã®å¿œç”¨å•é¡Œ</p>
                    <span class="difficulty advanced">ä¸Šç´š</span>
                </div>
            </div>

            <!-- è©³ç´°ãƒ¬ãƒƒã‚¹ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <div id="lesson-content" style="display: none;">
                <button class="btn btn-secondary" onclick="backToLessons()">â† ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ã«æˆ»ã‚‹</button>
                <div id="lesson-detail"></div>
            </div>
        </div>

        <!-- ç·´ç¿’å•é¡Œã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="practice" class="content-section">
            <div class="card">
                <h2>ç·´ç¿’å•é¡Œ</h2>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%" id="quiz-progress"></div>
                </div>
                <div id="quiz-container"></div>
                <div id="quiz-feedback"></div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="startQuiz()">ç·´ç¿’é–‹å§‹</button>
                    <button class="btn btn-secondary" onclick="nextQuestion()" id="next-btn" style="display: none;">æ¬¡ã®å•é¡Œ</button>
                </div>
            </div>
        </div>

        <!-- è¨ˆç®—æ©Ÿã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="calculator" class="content-section">
            <div class="card">
                <h2>å¾®åˆ†ãƒ»ç©åˆ†è¨ˆç®—æ©Ÿ</h2>
                <div class="calculator">
                    <h3>å¾®åˆ†è¨ˆç®—</h3>
                    <input type="text" class="calc-input" id="diff-input" placeholder="ä¾‹: x^3 + 2*x^2 + x + 1">
                    <button class="btn btn-primary" onclick="calculateDerivative()">å¾®åˆ†ã™ã‚‹</button>
                    <div class="calc-result" id="diff-result">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
                </div>
                <div class="calculator">
                    <h3>ç©åˆ†è¨ˆç®—</h3>
                    <input type="text" class="calc-input" id="int-input" placeholder="ä¾‹: 3*x^2 + 4*x + 5">
                    <button class="btn btn-primary" onclick="calculateIntegral()">ç©åˆ†ã™ã‚‹</button>
                    <div class="calc-result" id="int-result">çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
                </div>
            </div>
        </div>

        <!-- é€²æ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div id="progress" class="content-section">
            <div class="card">
                <h2>å­¦ç¿’é€²æ—</h2>
                <div id="progress-content">
                    <div class="progress-item">
                        <h3>å®Œäº†ã—ãŸãƒ¬ãƒƒã‚¹ãƒ³</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 25%" id="lesson-progress"></div>
                        </div>
                        <p>1/4 ãƒ¬ãƒƒã‚¹ãƒ³å®Œäº†</p>
                    </div>
                    <div class="progress-item">
                        <h3>ç·´ç¿’å•é¡Œã®æ­£ç­”ç‡</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 0%" id="accuracy-progress"></div>
                        </div>
                        <p id="accuracy-text">ã¾ã å•é¡Œã‚’è§£ã„ã¦ã„ã¾ã›ã‚“</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ -->
    <div class="install-prompt" id="install-prompt">
        <span>ã“ã®ã‚¢ãƒ—ãƒªã‚’ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿ</span>
        <div>
            <button onclick="dismissInstall()">å¾Œã§</button>
            <button onclick="installApp()">è¿½åŠ </button>
        </div>
    </div>

    <script>
        // PWAé–¢é€£ã®è¨­å®š
        let deferredPrompt;
        let currentQuizIndex = 0;
        let quizScore = 0;
        let totalQuestions = 0;

        // MathJaxè¨­å®š
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };

        // ãƒ¬ãƒƒã‚¹ãƒ³ãƒ‡ãƒ¼ã‚¿
        const lessons = {
            'differential-basics': {
                title: 'å¾®åˆ†ã®åŸºç¤',
                content: `
                    <h2>å¾®åˆ†ã¨ã¯ï¼Ÿ</h2>
                    <p>å¾®åˆ†ã¯é–¢æ•°ã®å¤‰åŒ–ç‡ã‚’æ±‚ã‚ã‚‹æ•°å­¦çš„æ“ä½œã§ã™ã€‚ç‰©ç†å­¦ã§ã¯é€Ÿåº¦ã‚„åŠ é€Ÿåº¦ã‚’æ±‚ã‚ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>
                    
                    <h3>å¾®åˆ†ã®å®šç¾©</h3>
                    <div class="formula-box">
                        é–¢æ•° $f(x)$ ã®å¾®åˆ†ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¾ã™ï¼š<br>
                        $$f'(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}$$
                    </div>
                    
                    <h3>åŸºæœ¬çš„ãªå¾®åˆ†å…¬å¼</h3>
                    <div class="formula-box">
                        <ul>
                            <li>å®šæ•°ã®å¾®åˆ†: $(c)' = 0$</li>
                            <li>ã¹ãä¹—ã®å¾®åˆ†: $(x^n)' = nx^{n-1}$</li>
                            <li>å’Œã®å¾®åˆ†: $(f + g)' = f' + g'$</li>
                            <li>ç©ã®å¾®åˆ†: $(fg)' = f'g + fg'$</li>
                        </ul>
                    </div>
                    
                    <h3>ä¾‹é¡Œ</h3>
                    <div class="example-box">
                        <strong>å•é¡Œ:</strong> $f(x) = x^3 + 2x^2 + 5x + 1$ ã‚’å¾®åˆ†ã—ã¦ãã ã•ã„ã€‚<br><br>
                        <strong>è§£ç­”:</strong><br>
                        $f'(x) = 3x^2 + 4x + 5$<br><br>
                        <strong>è§£èª¬:</strong><br>
                        - $x^3$ ã®å¾®åˆ†: $3x^2$<br>
                        - $2x^2$ ã®å¾®åˆ†: $4x$<br>
                        - $5x$ ã®å¾®åˆ†: $5$<br>
                        - å®šæ•° $1$ ã®å¾®åˆ†: $0$
                    </div>
                `
            },
            'differential-rules': {
                title: 'å¾®åˆ†ã®å…¬å¼',
                content: `
                    <h2>é‡è¦ãªå¾®åˆ†å…¬å¼</h2>
                    
                    <h3>ä¸‰è§’é–¢æ•°ã®å¾®åˆ†</h3>
                    <div class="formula-box">
                        <ul>
                            <li>$(\\sin x)' = \\cos x$</li>
                            <li>$(\\cos x)' = -\\sin x$</li>
                            <li>$(\\tan x)' = \\sec^2 x = \\frac{1}{\\cos^2 x}$</li>
                        </ul>
                    </div>
                    
                    <h3>æŒ‡æ•°ãƒ»å¯¾æ•°é–¢æ•°ã®å¾®åˆ†</h3>
                    <div class="formula-box">
                        <ul>
                            <li>$(e^x)' = e^x$</li>
                            <li>$(a^x)' = a^x \\ln a$</li>
                            <li>$(\\ln x)' = \\frac{1}{x}$</li>
                            <li>$(\\log_a x)' = \\frac{1}{x \\ln a}$</li>
                        </ul>
                    </div>
                    
                    <h3>åˆæˆé–¢æ•°ã®å¾®åˆ†ï¼ˆé€£é–å¾‹ï¼‰</h3>
                    <div class="formula-box">
                        $y = f(g(x))$ ã®ã¨ãï¼š<br>
                        $$\\frac{dy}{dx} = f'(g(x)) \\cdot g'(x)$$
                    </div>
                    
                    <h3>ä¾‹é¡Œ</h3>
                    <div class="example-box">
                        <strong>å•é¡Œ:</strong> $f(x) = \\sin(x^2 + 1)$ ã‚’å¾®åˆ†ã—ã¦ãã ã•ã„ã€‚<br><br>
                        <strong>è§£ç­”:</strong><br>
                        $f'(x) = \\cos(x^2 + 1) \\cdot 2x = 2x\\cos(x^2 + 1)$<br><br>
                        <strong>è§£èª¬:</strong><br>
                        åˆæˆé–¢æ•°ã®å¾®åˆ†ã‚’ä½¿ã„ã¾ã™ã€‚<br>
                        å¤–å´ã®é–¢æ•°: $\\sin u$ â†’ å¾®åˆ†ã™ã‚‹ã¨ $\\cos u$<br>
                        å†…å´ã®é–¢æ•°: $u = x^2 + 1$ â†’ å¾®åˆ†ã™ã‚‹ã¨ $2x$
                    </div>
                `
            },
            'integral-basics': {
                title: 'ç©åˆ†ã®åŸºç¤',
                content: `
                    <h2>ç©åˆ†ã¨ã¯ï¼Ÿ</h2>
                    <p>ç©åˆ†ã¯å¾®åˆ†ã®é€†æ“ä½œã§ã€é¢ç©ã‚„ç´¯ç©é‡ã‚’æ±‚ã‚ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</p>
                    
                    <h3>ä¸å®šç©åˆ†</h3>
                    <div class="formula-box">
                        $f(x)$ ã®ä¸å®šç©åˆ†ï¼ˆåŸå§‹é–¢æ•°ï¼‰ã‚’ $F(x)$ ã¨ã™ã‚‹ã¨ï¼š<br>
                        $$\\int f(x) dx = F(x) + C$$<br>
                        ã“ã“ã§ $C$ ã¯ç©åˆ†å®šæ•°ã§ã™ã€‚
                    </div>
                    
                    <h3>åŸºæœ¬çš„ãªç©åˆ†å…¬å¼</h3>
                    <div class="formula-box">
                        <ul>
                            <li>$\\int x^n dx = \\frac{x^{n+1}}{n+1} + C$ ï¼ˆ$n \\neq -1$ï¼‰</li>
                            <li>$\\int \\frac{1}{x} dx = \\ln|x| + C$</li>
                            <li>$\\int e^x dx = e^x + C$</li>
                            <li>$\\int \\sin x dx = -\\cos x + C$</li>
                            <li>$\\int \\cos x dx = \\sin x + C$</li>
                        </ul>
                    </div>
                    
                    <h3>å®šç©åˆ†</h3>
                    <div class="formula-box">
                        å®šç©åˆ†ã¯æ¬¡ã®ã‚ˆã†ã«è¨ˆç®—ã•ã‚Œã¾ã™ï¼š<br>
                        $$\\int_a^b f(x) dx = F(b) - F(a)$$<br>
                        ã“ã‚Œã¯å¾®ç©åˆ†å­¦ã®åŸºæœ¬å®šç†ã¨å‘¼ã°ã‚Œã¾ã™ã€‚
                    </div>
                    
                    <h3>ä¾‹é¡Œ</h3>
                    <div class="example-box">
                        <strong>å•é¡Œ:</strong> $\\int (3x^2 + 2x + 1) dx$ ã‚’è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚<br><br>
                        <strong>è§£ç­”:</strong><br>
                        $\\int (3x^2 + 2x + 1) dx = x^3 + x^2 + x + C$<br><br>
                        <strong>è§£èª¬:</strong><br>
                        - $3x^2$ ã®ç©åˆ†: $x^3$<br>
                        - $2x$ ã®ç©åˆ†: $x^2$<br>
                        - $1$ ã®ç©åˆ†: $x$<br>
                        - ç©åˆ†å®šæ•° $C$ ã‚’å¿˜ã‚Œãšã«ï¼
                    </div>
                `
            },
            'integral-applications': {
                title: 'ç©åˆ†ã®å¿œç”¨',
                content: `
                    <h2>ç©åˆ†ã®å¿œç”¨</h2>
                    
                    <h3>é¢ç©ã®è¨ˆç®—</h3>
                    <p>æ›²ç·š $y = f(x)$ ã¨ $x$ è»¸ã€ç›´ç·š $x = a$ã€$x = b$ ã§å›²ã¾ã‚ŒãŸé¢ç©ã¯ï¼š</p>
                    <div class="formula-box">
                        $$S = \\int_a^b |f(x)| dx$$
                    </div>
                    
                    <h3>ä½“ç©ã®è¨ˆç®—</h3>
                    <p>å›è»¢ä½“ã®ä½“ç©ã¯æ¬¡ã®å…¬å¼ã§æ±‚ã‚ã‚‰ã‚Œã¾ã™ï¼š</p>
                    <div class="formula-box">
                        $x$ è»¸å›ã‚Šã®å›è»¢: $V = \\pi \\int_a^b [f(x)]^2 dx$<br>
                        $y$ è»¸å›ã‚Šã®å›è»¢: $V = 2\\pi \\int_a^b x f(x) dx$
                    </div>
                    
                    <h3>ç‰©ç†ã¸ã®å¿œç”¨</h3>
                    <div class="formula-box">
                        <ul>
                            <li>å¤‰ä½: $s = \\int v(t) dt$</li>
                            <li>ä»•äº‹: $W = \\int F(x) dx$</li>
                            <li>é‡å¿ƒ: $\\bar{x} = \\frac{\\int x f(x) dx}{\\int f(x) dx}$</li>
                        </ul>
                    </div>
                    
                    <h3>ä¾‹é¡Œ</h3>
                    <div class="example-box">
                        <strong>å•é¡Œ:</strong> $y = x^2$ ã¨ $x$ è»¸ã€$x = 0$ã€$x = 2$ ã§å›²ã¾ã‚ŒãŸé¢ç©ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚<br><br>
                        <strong>è§£ç­”:</strong><br>
                        $S = \\int_0^2 x^2 dx = \\left[\\frac{x^3}{3}\\right]_0^2 = \\frac{8}{3} - 0 = \\frac{8}{3}$<br><br>
                        <strong>è§£èª¬:</strong><br>
                        $x^2 \\geq 0$ ãªã®ã§çµ¶å¯¾å€¤ã¯ä¸è¦ã§ã™ã€‚<br>
                        å®šç©åˆ†ã®è¨ˆç®—ã«ã‚ˆã‚Šé¢ç©ã¯ $\\frac{8}{3}$ å¹³æ–¹å˜ä½ã¨ãªã‚Šã¾ã™ã€‚
                    </div>
                `
            }
        };

        // ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿
        const quizQuestions = [
            {
                question: "$f(x) = x^3$ ã®å¾®åˆ† $f'(x)$ ã¯ï¼Ÿ",
                options: ["$3x^2$", "$x^2$", "$3x$", "$x^4$"],
                correct: 0,
                explanation: "ã¹ãä¹—ã®å¾®åˆ†å…¬å¼ $(x^n)' = nx^{n-1}$ ã‚’ä½¿ã†ã¨ã€$(x^3)' = 3x^2$ ã¨ãªã‚Šã¾ã™ã€‚"
            },
            {
                question: "$\\int x^2 dx$ ã®çµæœã¯ï¼Ÿï¼ˆç©åˆ†å®šæ•°Cã¯çœç•¥ï¼‰",
                options: ["$\\frac{x^3}{3}$", "$2x$", "$x^3$", "$\\frac{x}{3}$"],
                correct: 0,
                explanation: "ã¹ãä¹—ã®ç©åˆ†å…¬å¼ $\\int x^n dx = \\frac{x^{n+1}}{n+1} + C$ ã‚’ä½¿ã„ã¾ã™ã€‚"
            },
            {
                question: "$(\\sin x)' = ?$",
                options: ["$\\cos x$", "$-\\cos x$", "$\\sin x$", "$-\\sin x$"],
                correct: 0,
                explanation: "ä¸‰è§’é–¢æ•°ã®
